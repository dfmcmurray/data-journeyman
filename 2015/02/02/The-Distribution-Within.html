<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>The Distribution Within</title><meta name=viewport content="width=device-width"><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css><link rel=stylesheet href=/css/main.83f8.css></head><body><div class=site><div id=header><a href="/"><div class=title></div><!-- <img class="title" src="/img/title-anglecia.0053.png" /> --><!-- <div class='title'>
			Data Journeyman
		</div>	 --><!-- <div class='tagline'>
			One man's journey from noise to knowledge<img src="/img/datum.19d4.png" />
		</div> --></a></div><div class=post-container><div class=post-heading><h2>The Distribution Within</h2><p class=meta>02 Feb 2015</p><div class=tags><span class="tag Curriculum">Curriculum</span> <span class="tag Think Stats">Think Stats</span> <span class="tag Statistics">Statistics</span> <span class="tag Book">Book</span> <span class="tag IPython">IPython</span></div></div><div class=post><p>After you have some distributions in your data toolbelt, the next logical step is being able to take a data set and to determine how well it can be described by a particular distribution. In this post we’ll look at methods of determining whether your data fits a distribution.</p><p>The ancillary IPython file is <a href="/ipython-notebooks/Distribution Within.ipynb">here</a>.</p><h3 id=use-your-eyes>Use Your Eyes</h3><p>The human brain is really adept at a wide range of data analysis. However, these fleshy computers do come with their own hang ups and miscalibrations.</p><p>So, a decent first step in testing which (if any) distribution is a good fit for your data is to look at it. Does the CDF for your data have a sigmoid shape? Maybe it’s a normal distribution. Does it rise quickly then level off as it approaches 1? It could be exponential. Ah, but it could also be a Pareto distribution. Or neither!</p><p>While just looking can point you in the right direction, it’s definitely not enough to support a claim that your data fits a particular distribution. What’s more is that it’s immensely useful to have metrics for how well the data fits, since there’s always going to be at least some deviation from a perfect distribution. Are you 95% sure that the underlying population conforms to a normal distribution. 99%? Good luck eyeballing that!</p><p>Clearly we need some more refined tools to proceed. This post will explore how to determine whether your data fits a given distribution, and in a future post we will explore how to quantify that fit.</p><h3 id=use-descriptive-statistics>Use Descriptive Statistics</h3><p>In some cases, distributions have well defined <a href=http://www.datajourneyman.com/2014/11/06/probability-and-statistics-terms.html#descriptive-statistics>descriptive statistics</a>. For example, the normal distribution has a skewness of 0 as well as an excess kurtosis of 0. Calculating these descriptive statistics of your data can give you a quantitative estimate of your data’s fit to a normal distribution.</p><p>Other distributions that have fixed values for skewness and excess kurtosis are the uniform distribution, with a skewness of 0 and an excess kurtosis of \(-\frac{6}{5}\), and the exponential distribution, with a skewness of 2 and an excess kurtosis of 6.</p><p>Distributions don’t always have fixed values for their descriptive statistics though. More often, these values are parameterizations. For example, the skewness and excess kurtosis of a Pareto distribution is in terms of \(\alpha\), and a lognormal distribution is in terms of \(\sigma\). For these two distributions, we’ll need to take a different approach.</p><h3 id=use-math>Use Math</h3><p>When we just “used our eyes” to guess whether our data fit a distribution, we looked at our data’s CDF and compare it to a well know it matched a well-known distribution’s CDF. The CDF graph uses linear axes, but what if we manipulated the axes to aid in our analysis?</p><p>Working with data, you may have already done something similar to this method. If you have data that grows exponentially, you can plot the x axis on a log scale, which will make your data linear. That’s exactly what we’re going to do here.</p><p>Take the Pareto distribution and plot the complimentary CDF (CCDF), where \(CCDF(x) = 1 - CDF(x)\). So the CCDF of a Pareto distribution is</p><p>\[y = \left(\frac{x}{x_m}\right)^{-\alpha}\]</p><p>Taking the log of both sides, we get the following:</p><p>\[log(y) = -\alpha(log(x) - log(x_m))\]</p><p>So if we plot the CCDF on a log-x, log-y scale, it should be a straight line with slope of \(-\alpha\). Below is a graph of data created by Python’s <code>random.paretovariate</code> function, so naturally it is a good fit. (<a href="/ipython-notebooks/Distribution\ Within.ipynb">Get IPython file here.</a>)</p><p><img src=/img/pareto-dist-test.ccd8.png alt="Pareto CCDF; log-log scale"></p><h3 id=use-rankits>Use Rankits</h3><p>In the previous example with the Pareto distribution, we used a log transformation on the x and y axis. But what if we could perform a normal-distribution transformation on the x axis. Or, better yet, a whatever-distribution-we-choose transformation on the x axis. Well, using something called rankits, we can!</p><p><a href=http://en.wikipedia.org/wiki/Rankit>Rankits</a> are the the (ordered) expected values when you sample a distribution. So, if you pulled 6 values from a normal distribution with \(\mu = 0\) and \(\sigma = 1\), the expected values would be \([−1.2672, −0.6418, −0.2016, 0.2016, 0.6418, 1.2672]\).</p><p>Imagine you have a data set of 1,000 samples. You can plot those samples’ values on the y-axis and use 1,000 rankits from the distribution to test on the x-axis. If the resulting plot is a straight line, then your data is a good match for that distribution.</p><p>Say you need \(n\) rankits. You can generate them by creating \( n \times m\) randome variables from a distribution, sort them, and then selecting every \(m\text{th}\) variable. The reason for this scaling by \(m\) is that it generates a better estimation of the rankits, since the more random variables you select, the more closely they will resemble the distribution due to the <a href=http://www.math.uah.edu/stat/dist/Convergence.html>Convergence in Distribution</a> principle of random variables.</p><div class=highlight><pre><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>rankits</span><span class=p>(</span><span class=n>n</span><span class=o>=</span><span class=mi>1000</span><span class=p>,</span> <span class=n>m</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>distFn</span><span class=o>=</span><span class=n>random</span><span class=o>.</span><span class=n>normalvariate</span><span class=p>,</span> <span class=n>distParams</span><span class=o>=</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=mi>1</span><span class=p>)):</span>
    <span class=sd>&quot;&quot;&quot;Generate rankits from a distributions.</span>

<span class=sd>    Keyword arguments:</span>
<span class=sd>    n -- the number of rankits to generate (default 1000)</span>
<span class=sd>    m -- the multiplier for more accurate results (default 10)</span>
<span class=sd>    distFn -- a function that return a random variable from the distribution (default random.normalvariate)</span>
<span class=sd>    distParams -- the parameters to be passed into distFn (default (0,1))</span>
<span class=sd>    &quot;&quot;&quot;</span>
    
    <span class=k>return</span> <span class=nb>sorted</span><span class=p>([</span><span class=n>distFn</span><span class=p>(</span><span class=o>*</span><span class=n>distParams</span><span class=p>)</span> <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>((</span><span class=n>n</span><span class=o>+</span><span class=mi>1</span><span class=p>)</span><span class=o>*</span><span class=n>m</span><span class=p>)])[</span><span class=n>m</span><span class=p>::</span><span class=n>m</span><span class=p>]</span></code></pre></div><p>Using the <code>rankits</code> function above, we can generate 1000 values from a normal distribution, an exponential distribution, and a Pareto distribution and compare it to the estimated rankits for each respective distribution. Each trial should result in roughly a straight line.</p><p><img src=/img/rankits-normal.2dca.png alt="Normal Distribution Rankits Plot"> <img src=/img/rankits-exp.ea42.png alt="Exponential Distribution Rankits Plot"> <img src=/img/rankits-pareto.702d.png alt="Pareto Distribution Rankits Plot"></p><p>The first two look good, but the Pareto distribution deviates much more from linear toward the right of the graph. Why? Well, remember that the PDF for a Pareto distribution tends to 0 much slower than the exponential distribution, so the likelihood of large outliers is greater. We should be able to fix this by either generating a larger sample that 1,000 or using a larger multiplier for our rankits. Doing both is probably the right choice, but let’s assume we have no more data available. Let’s just try upping the rankit multiplier.</p><p>After some trial and error with the multiplier value, I finally pushed it up to 5,000, which yielded a pretty good result.</p><p><img src=/img/rankits-pareto-good.b669.png alt="Pareto Distribution Rankits Plot With High Rankit Multiplier"></p><p>It’s very important to note that we might have assumed our data was a poor fit if we hadn’t known something about the Pareto distribution – that it can have outliers which could affect the right side of the rankit plot. So it’s very important to understand the properties of a wide range of distributions for this kind of analysis.</p></div><div class=comments><div id=disqus_thread></div><script type=text/javascript>/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	        var disqus_shortname = 'datajourneyman'; // required: replace example with your forum shortname

	        /* * * DON'T EDIT BELOW THIS LINE * * */
	        (function() {
	            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	        })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script src=//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js></script><script src=//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js></script><script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">MathJax.Hub.Config({
		"HTML-CSS": { linebreaks: { automatic: true } },
		SVG: { linebreaks: { automatic: true } },
		TeX: { 
            Macros: { 
              goodbreak: '\\mmlToken{mo}[linebreak="goodbreak"]{}', 
              badbreak: ['\\mmlToken{mo}[linebreak="badbreak"]{#1}',1], 
              nobreak: ['\\mmlToken{mo}[linebreak="nobreak"]{#1}',1], 
              invisibletimes: ['\\mmlToken{mo}{\u2062}'] 
            } 
        } 
    });</script><script src=/js/scripts.08ae.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10466691-5', 'auto');
  ga('send', 'pageview');</script></body></html>